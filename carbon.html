<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸŒ± ç¢³åŒ¯ï¼šå›ºç¢³åŸç†èˆ‡å…¬å¼</title>
  <style>
    body{font-family:"Microsoft JhengHei",sans-serif; margin:0; background:#fdfdfd; color:#222; transition:background .3s, color .3s;}
    body.dark{background:#1e293b; color:#f1f5f9;}
    nav{background:#f4f4f4; padding:10px; display:flex; justify-content:space-between; align-items:center;}
    body.dark nav{background:#0f172a;}
    nav a{color:#333; text-decoration:none; margin-left:12px;}
    body.dark nav a{color:#f1f5f9;}
    nav .brand{font-weight:700; color:#1e90ff}
    main{max-width:1080px; margin:24px auto; padding:0 16px;}
    h1{margin:8px 0 16px; color:#2c3e50}
    h2{margin:28px 0 10px; color:#2c3e50}
    p{line-height:1.75}
    ul{line-height:1.7}

    /* Switch */
    .switch{margin-left:16px; position:relative; display:inline-block; width:44px; height:24px; vertical-align:middle;}
    .switch input{opacity:0; width:0; height:0;}
    .slider{position:absolute; cursor:pointer; inset:0; background:#ccc; transition:.4s; border-radius:24px;}
    .slider:before{position:absolute; content:""; height:18px; width:18px; left:3px; bottom:3px; background:white; transition:.4s; border-radius:50%;}
    input:checked + .slider{background:#1e90ff;}
    input:checked + .slider:before{transform:translateX(20px);}

    /* switch æ–‡å­—ï¼ˆå¯é»æ“Šï¼‰ */
    .switch-text{margin-left:8px; font-size:14px; color:#333; cursor:pointer; user-select:none; vertical-align:middle;}
    body.dark .switch-text{color:#f1f5f9;}

    /* Carousel */
    .carousel{position:relative; border-radius:12px; overflow:hidden; box-shadow:0 8px 20px rgba(0,0,0,.07);}
    .carousel .stage{position:relative; width:100%; aspect-ratio:16/9; background:#111;}
    .carousel .slide{position:absolute; inset:0; display:none;}
    .carousel .slide.active{display:block;}
    .carousel img{width:100%; height:100%; object-fit:cover; transition:transform .35s ease;}
    .carousel:hover .slide.active img{transform:scale(1.02);}
    .arrow{position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,.45); color:#fff; border:none; width:42px; height:42px; border-radius:50%; cursor:pointer; display:grid; place-items:center; font-size:18px;}
    .arrow:hover{background:rgba(0,0,0,.6);}
    .prev{left:10px}
    .next{right:10px}
    .dots{position:absolute; left:0; right:0; bottom:10px; display:flex; gap:8px; justify-content:center;}
    .dot{width:10px; height:10px; border-radius:50%; border:2px solid rgba(255,255,255,.9); background:rgba(255,255,255,.25); cursor:pointer;}
    .dot.active{background:#fff}
    .progress{position:absolute; left:0; right:0; bottom:0; height:4px; background:rgba(255,255,255,.18);}
    .progress .bar{height:100%; width:0%; background:linear-gradient(90deg,#5fb3ff,#1e90ff);}
    .caption{position:absolute; left:12px; bottom:12px; background:rgba(0,0,0,.42); color:#fff; font-size:14px; padding:6px 10px; border-radius:8px; max-width:min(80%, 800px); line-height:1.5;}
    .controls{position:absolute; right:10px; bottom:10px; display:flex; gap:8px;}
    .btn{background:rgba(0,0,0,.45); color:#fff; border:none; border-radius:10px; padding:6px 10px; font-size:13px; cursor:pointer;}
    .btn:hover{background:rgba(0,0,0,.6);}
  </style>
</head>
<body>
  <nav>
    <div class="brand">ğŸ“˜ UDM ESG æ°¸çºŒæ•™ç§‘æ›¸</div>
    <div>
      <a href="index.html">ğŸ  é¦–é </a>
      <a href="sunshine.html">ğŸŒ é™½å…‰</a>
      <a href="air.html">ğŸ’¨ ç©ºæ°£</a>
      <a href="water.html">ğŸ’§ æ°´</a>
      <a href="carbon.html">ğŸŒ± ç¢³åŒ¯</a>
      <label class="switch">
        <input type="checkbox" id="darkToggle" aria-label="åˆ‡æ›æ·±è‰²æ¨¡å¼">
        <span class="slider"></span>
      </label>
      <!-- æ–°å¢ï¼šå¯é»æ“Šçš„æ–‡å­—æ¨™ç±¤ï¼ˆèˆ‡ water/index å°é½Šï¼‰ -->
      <label class="switch-text" for="darkToggle">æ·±è‰²</label>
    </div>
  </nav>

  <main>
    <h1>ğŸŒ± ç¢³åŒ¯ï¼šå›ºç¢³åŸç†èˆ‡å…¬å¼</h1>

    <section class="carousel" id="carbonCarousel" tabindex="0">
      <div class="stage">
        <div class="slide active"><img src="C1.png" alt="æ£®æ—ç¢³åŒ¯" data-caption="æ£®æ—æ˜¯é‡è¦ç¢³åŒ¯ï¼šé€éå…‰åˆä½œç”¨æŠŠ COâ‚‚ è®Šæˆç”Ÿç‰©é‡ã€‚"></div>
        <div class="slide"><img src="C2.png" alt="è‰åœ°ç¢³åŒ¯" data-caption="è‰åœ°èˆ‡æ¿•åœ°æŠŠç¢³é•·æœŸå„²å­˜åœ¨æ¤ç‰©é«”èˆ‡åœŸå£¤ä¸­ã€‚"></div>
        <div class="slide"><img src="C3.png" alt="æµ·æ´‹ç¢³åŒ¯" data-caption="æµ·æ´‹æµ®æ¸¸æ¤ç‰©æ¯å¹´å¸æ”¶å…¨çƒç´„å››åˆ†ä¹‹ä¸€ COâ‚‚ã€‚"></div>
        <div class="slide"><img src="C4.png" alt="æ ¡åœ’ç¢³åŒ¯" data-caption="æ ¡åœ’æ¨¹æœ¨èª¿æŸ¥å¯ç”¨ DBH èˆ‡æ¨¹é«˜ä¼°ç®—ç¢³åŒ¯ã€‚"></div>
        <div class="slide"><img src="C5.png" alt="æ¨¹é½¡ç¢³åŒ¯" data-caption="æ¨¹é½¡ä¸åŒï¼Œå¹´å›ºç¢³é‡ä¹Ÿä¸åŒï¼Œæˆé•·æœ€å¿«æ™‚å¸æ”¶æœ€å¤šã€‚"></div>
        <div class="slide"><img src="C6.png" alt="æ°¸çºŒç¶“ç‡Ÿ" data-caption="æ°¸çºŒç¶“ç‡Ÿï¼šä¿è‚²ã€ç”Ÿç”¢ã€æ•™è‚²ä¸‰åˆä¸€ã€‚"></div>
        <div class="slide"><img src="C7.png" alt="è³‡æ–™ç¢³åŒ¯" data-caption="ä»¥è³‡æ–™é©…å‹•çš„ç¢³åŒ¯ç›¤é»èˆ‡æ•™å­¸æ´»å‹•ã€‚"></div>

        <button class="arrow prev" aria-label="ä¸Šä¸€å¼µ">â€¹</button>
        <button class="arrow next" aria-label="ä¸‹ä¸€å¼µ">â€º</button>
        <div class="dots" aria-hidden="true"></div>
        <div class="controls"><button class="btn" id="togglePlay">â¸ æš«åœ</button></div>
        <div class="caption" id="caption">æ£®æ—æ˜¯é‡è¦ç¢³åŒ¯ï¼šé€éå…‰åˆä½œç”¨æŠŠ COâ‚‚ è®Šæˆç”Ÿç‰©é‡ã€‚</div>
        <div class="progress"><div class="bar" id="progressBar"></div></div>
      </div>
    </section>

    <h2>ğŸ“˜ ä»€éº¼æ˜¯ç¢³åŒ¯ï¼Ÿ</h2>
    <p>ç¢³åŒ¯ï¼ˆCarbon Sinkï¼‰æ˜¯èƒ½å¤ å¸æ”¶ä¸¦å„²å­˜äºŒæ°§åŒ–ç¢³ï¼ˆCOâ‚‚ï¼‰çš„è‡ªç„¶æˆ–äººå·¥ç³»çµ±ï¼Œæ˜¯å°æŠ—æ°£å€™è®Šé·çš„é‡è¦åŠ›é‡ã€‚</p>
    <ul>
      <li>ğŸŒ³ æ£®æ—ï¼šé€éå…‰åˆä½œç”¨å¸æ”¶ COâ‚‚</li>
      <li>ğŸŒ¿ è‰åœ°èˆ‡æ¿•åœ°ï¼šå„²å­˜ç¢³æ–¼æ¤ç‰©é«”èˆ‡åœŸå£¤</li>
      <li>ğŸŒŠ æµ·æ´‹ï¼šæµ·è—»èˆ‡æµ®æ¸¸æ¤ç‰©ä¹Ÿæ˜¯é‡è¦ç¢³åŒ¯</li>
    </ul>

    <h2>ğŸ“Š å›ºç¢³é‡èˆ‡ç¸½å›ºç¢³é‡</h2>
    <ul>
      <li><strong>å¹´å›ºç¢³é‡ï¼š</strong> æŒ‡æ¨¹æœ¨æ¯å¹´èƒ½å¸æ”¶å¤šå°‘ COâ‚‚ï¼Œæœƒéš¨æ¨¹é½¡èˆ‡ç”Ÿé•·é€Ÿç‡è€Œè®Šå‹•ã€‚</li>
      <li><strong>ç¸½å›ºç¢³é‡ï¼š</strong> æŒ‡ä¸€æ£µæ¨¹æˆ–ä¸€ç‰‡æ—åœ°è‡³ä»Šç‚ºæ­¢å¸æ”¶ä¸¦å›ºå®šçš„ COâ‚‚ ç¸½é‡ã€‚</li>
    </ul>

    <h2>ğŸ“ è¨ˆç®—å…¬å¼ï¼ˆç°¡åŒ–ç‰ˆï¼‰ï¼š</h2>
    <ul>
      <li><strong>ç”Ÿç‰©é‡ï¼š</strong> Biomass = 0.15 Ã— DBH<sup>2.27</sup></li>
      <li><strong>ç¢³å«é‡ï¼š</strong> Carbon = Biomass Ã— 0.5</li>
      <li><strong>COâ‚‚ å›ºå®šé‡ï¼š</strong> COâ‚‚ = Carbon Ã— 3.67</li>
      <li><strong>å¹´å›ºç¢³é‡ï¼š</strong> COâ‚‚ Ã· æ¨¹é½¡</li>
    </ul>
  </main>

  <script>
  // Dark mode toggle
  const darkToggle = document.getElementById("darkToggle");
  darkToggle?.addEventListener("change", ()=> document.body.classList.toggle("dark", darkToggle.checked));

  // Carousel
  (function(){
    const root = document.getElementById('carbonCarousel');
    if (!root) return;
    const slides = Array.from(root.querySelectorAll('.slide'));
    const prevBtn = root.querySelector('.prev');
    const nextBtn = root.querySelector('.next');
    const dotsWrap = root.querySelector('.dots');
    const progressBar = document.getElementById('progressBar');
    const caption = document.getElementById('caption');
    const togglePlayBtn = document.getElementById('togglePlay');

    const AUTOPLAY_MS = 4000;
    const DRAG_THRESHOLD = 40;
    let i = 0, timer = null, playing = true, startedAt=0;

    slides.forEach((_, idx)=>{
      const d=document.createElement('div');
      d.className='dot'+(idx===0?' active':'');
      d.addEventListener('click', ()=>{stop();go(idx);play();});
      dotsWrap.appendChild(d);
    });
    const dots=Array.from(dotsWrap.children);

    function setCaption(idx){
      const img=slides[idx].querySelector('img');
      caption.textContent=img?.dataset?.caption||img?.alt||'';
    }
    function go(n){
      slides[i].classList.remove('active');
      dots[i].classList.remove('active');
      i=(n+slides.length)%slides.length;
      slides[i].classList.add('active');
      dots[i].classList.add('active');
      setCaption(i);
      resetProgress();
    }
    function next(){go(i+1);}
    function prev(){go(i-1);}
    function resetProgress(){startedAt=performance.now(); progressBar.style.width='0%';}
    function tick(){
      if(!playing)return;
      const elapsed=performance.now()-startedAt;
      const p=Math.min(1,elapsed/AUTOPLAY_MS);
      progressBar.style.width=(p*100).toFixed(1)+'%';
      if(p>=1) next();
      timer=requestAnimationFrame(tick);
    }
    function play(){if(playing)return; playing=true; togglePlayBtn.textContent='â¸ æš«åœ'; resetProgress(); timer=requestAnimationFrame(tick);}
    function stop(){playing=false; togglePlayBtn.textContent='â–¶ï¸ æ’­æ”¾'; cancelAnimationFrame(timer);}

    togglePlayBtn.addEventListener('click',()=>playing?stop():play());
    nextBtn.addEventListener('click',()=>{stop();next();play();});
    prevBtn.addEventListener('click',()=>{stop();prev();play();});
    root.addEventListener('mouseenter',stop);
    root.addEventListener('mouseleave',()=>{if(!playing)play();});
    document.addEventListener('visibilitychange',()=>{document.hidden?stop():play();});
    root.addEventListener('keydown',e=>{
      if(e.key==='ArrowRight'){stop();next();play();}
      if(e.key==='ArrowLeft'){stop();prev();play();}
      if(e.key===' '){e.preventDefault(); playing?stop():play();}
    });
    let startX=null,dragging=false;
    const stage=root.querySelector('.stage');
    const onPointerDown=e=>{dragging=true;startX=e.clientX??e.touches?.[0]?.clientX;stop();}
    const onPointerUp=e=>{
      if(!dragging)return;
      const endX=e.clientX??e.changedTouches?.[0]?.clientX;
      const dx=endX-startX; dragging=false;
      if(Math.abs(dx)>DRAG_THRESHOLD){dx<0?next():prev();}
      play();
    }
    stage.addEventListener('mousedown',onPointerDown);
    window.addEventListener('mouseup',onPointerUp);
    stage.addEventListener('touchstart',onPointerDown,{passive:true});
    stage.addEventListener('touchend',onPointerUp);

    setCaption(0);
    resetProgress();
    timer=requestAnimationFrame(tick);
  })();
  </script>
</body>
</html>
