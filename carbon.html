<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸŒ± ç¢³åŒ¯ï¼šå›ºç¢³åŸç†èˆ‡å…¬å¼</title>
  <style>
    body{font-family:"Microsoft JhengHei",sans-serif; margin:0; background:#fdfdfd; color:#222;}
    nav{background:#f4f4f4; padding:10px; display:flex; justify-content:space-between; align-items:center;}
    nav a{color:#333; text-decoration:none; margin-left:12px}
    nav .brand{font-weight:700; color:#1e90ff}
    main{max-width:1080px; margin:24px auto; padding:0 16px;}
    h1{margin:8px 0 16px; color:#2c3e50}
    h2{margin:28px 0 10px; color:#2c3e50}
    p{line-height:1.75}
    ul{line-height:1.7}

    /* ====== Carousel ====== */
    .carousel{position:relative; border-radius:12px; overflow:hidden; box-shadow:0 8px 20px rgba(0,0,0,.07);}
    .carousel:focus{outline:2px solid #1e90ff55; outline-offset:2px;}
    .carousel .stage{position:relative; width:100%; aspect-ratio:16/9; background:#111;}
    .carousel .slide{position:absolute; inset:0; display:none;}
    .carousel .slide.active{display:block;}
    .carousel img{
      width:100%; height:100%; object-fit:cover; object-position:center;
      transition: transform .35s ease;
    }
    /* æ»‘é¼ ç§»å…¥è¼•å¾®æ”¾å¤§ */
    .carousel:hover .slide.active img{ transform: scale(1.02); }

    .carousel .arrow{
      position:absolute; top:50%; transform:translateY(-50%);
      background:rgba(0,0,0,.45); color:#fff; border:none; width:42px; height:42px;
      border-radius:50%; cursor:pointer; display:grid; place-items:center; font-size:18px;
      transition: background .2s ease;
    }
    .carousel .arrow:hover{background:rgba(0,0,0,.6)}
    .carousel .prev{left:10px}
    .carousel .next{right:10px}

    .dots{
      position:absolute; left:0; right:0; bottom:10px;
      display:flex; gap:8px; justify-content:center; align-items:center;
      pointer-events:auto;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid rgba(255,255,255,.9);
      background:rgba(255,255,255,.25); cursor:pointer;
      transition: transform .15s ease, background .15s ease;
    }
    .dot:hover{ transform:scale(1.15); background:#fff; }
    .dot.active{background:#fff}

    /* é€²åº¦æ¢ */
    .progress{
      position:absolute; left:0; right:0; bottom:0;
      height:4px; background:rgba(255,255,255,.18);
    }
    .progress .bar{
      height:100%; width:0%;
      background:linear-gradient(90deg,#5fb3ff,#1e90ff);
      transition: width .1s linear;
    }

    /* æ¨™é¡Œæµ®å±¤ */
    .caption{
      position:absolute; left:12px; bottom:12px;
      background:rgba(0,0,0,.42); color:#fff; font-size:14px;
      padding:6px 10px; border-radius:8px; max-width:min(80%, 800px);
      line-height:1.5; backdrop-filter:saturate(140%) blur(2px);
      opacity:.98;
    }

    /* æ’­æ”¾/æš«åœ */
    .controls{
      position:absolute; right:10px; bottom:10px; display:flex; gap:8px; z-index:2;
    }
    .btn{
      background:rgba(0,0,0,.45); color:#fff; border:none; border-radius:10px;
      padding:6px 10px; font-size:13px; cursor:pointer;
    }
    .btn:hover{ background:rgba(0,0,0,.6); }
  </style>
</head>
<body>
  <nav>
    <div class="brand">ğŸ“˜ UDM ESG æ°¸çºŒæ•™ç§‘æ›¸</div>
    <div>
      <a href="index.html">ğŸ  é¦–é </a>
      <a href="sunshine.html">ğŸŒ é™½å…‰</a>
      <a href="air.html">ğŸ’¨ ç©ºæ°£</a>
      <a href="water.html">ğŸ’§ æ°´</a>
      <a href="carbon.html">ğŸŒ± ç¢³åŒ¯</a>
    </div>
  </nav>

  <main>
    <h1>ğŸŒ± ç¢³åŒ¯ï¼šå›ºç¢³åŸç†èˆ‡å…¬å¼</h1>

    <!-- åœ–ç‰‡è¼ªæ’­ï¼ˆå¸¶äº’å‹•ï¼‰ -->
    <section class="carousel" id="carbonCarousel" aria-label="ç¢³åŒ¯ç¤ºç¯„å½±åƒ" tabindex="0">
      <div class="stage">
        <!-- data-caption å¯è‡ªè¨‚æ¯å¼µåœ–çš„æ¨™é¡Œèªªæ˜ -->
        <div class="slide active"><img src="C1.png" alt="ç¢³åŒ¯ç¤ºæ„ 1" loading="eager"  decoding="async" data-caption="æ£®æ—æ˜¯é‡è¦ç¢³åŒ¯ï¼šé€éå…‰åˆä½œç”¨æŠŠ COâ‚‚ è®Šæˆç”Ÿç‰©é‡ã€‚"></div>
        <div class="slide"><img src="C2.png" alt="ç¢³åŒ¯ç¤ºæ„ 2" loading="lazy"   decoding="async" data-caption="è‰åœ°èˆ‡æ¿•åœ°æŠŠç¢³é•·æœŸå„²å­˜åœ¨æ¤ç‰©é«”èˆ‡åœŸå£¤ä¸­ã€‚"></div>
        <div class="slide"><img src="C3.png" alt="ç¢³åŒ¯ç¤ºæ„ 3" loading="lazy"   decoding="async" data-caption="æµ·æ´‹æµ®æ¸¸æ¤ç‰©æ¯å¹´å¸æ”¶å…¨çƒç´„å››åˆ†ä¹‹ä¸€ COâ‚‚ã€‚"></div>
        <div class="slide"><img src="C4.png" alt="ç¢³åŒ¯ç¤ºæ„ 4" loading="lazy"   decoding="async" data-caption="æ ¡åœ’æ¨¹æœ¨èª¿æŸ¥å¯ç”¨ DBH èˆ‡æ¨¹é«˜ä¼°ç®—ç¢³åŒ¯ã€‚"></div>
        <div class="slide"><img src="C5.png" alt="ç¢³åŒ¯ç¤ºæ„ 5" loading="lazy"   decoding="async" data-caption="æ¨¹é½¡ä¸åŒï¼Œå¹´å›ºç¢³é‡ä¹Ÿä¸åŒï¼Œæˆé•·æœ€å¿«æ™‚å¸æ”¶æœ€å¤šã€‚"></div>
        <div class="slide"><img src="C6.png" alt="ç¢³åŒ¯ç¤ºæ„ 6" loading="lazy"   decoding="async" data-caption="æ°¸çºŒç¶“ç‡Ÿï¼šä¿è‚²ã€ç”Ÿç”¢ã€æ•™è‚²ä¸‰åˆä¸€ã€‚"></div>
        <div class="slide"><img src="C7.png" alt="ç¢³åŒ¯ç¤ºæ„ 7" loading="lazy"   decoding="async" data-caption="ä»¥è³‡æ–™é©…å‹•çš„ç¢³åŒ¯ç›¤é»èˆ‡æ•™å­¸æ´»å‹•ã€‚"></div>

        <button class="arrow prev" aria-label="ä¸Šä¸€å¼µ" title="ä¸Šä¸€å¼µ">â€¹</button>
        <button class="arrow next" aria-label="ä¸‹ä¸€å¼µ" title="ä¸‹ä¸€å¼µ">â€º</button>
        <div class="dots" aria-hidden="true"></div>

        <div class="controls">
          <button class="btn" id="togglePlay" aria-label="æ’­æ”¾/æš«åœ">â¸ æš«åœ</button>
        </div>

        <div class="caption" id="caption">æ£®æ—æ˜¯é‡è¦ç¢³åŒ¯ï¼šé€éå…‰åˆä½œç”¨æŠŠ COâ‚‚ è®Šæˆç”Ÿç‰©é‡ã€‚</div>
        <div class="progress"><div class="bar" id="progressBar"></div></div>
      </div>
    </section>

    <h2>ğŸ“˜ ä»€éº¼æ˜¯ç¢³åŒ¯ï¼Ÿ</h2>
    <p>ç¢³åŒ¯ï¼ˆCarbon Sinkï¼‰æ˜¯èƒ½å¤ å¸æ”¶ä¸¦å„²å­˜äºŒæ°§åŒ–ç¢³ï¼ˆCOâ‚‚ï¼‰çš„è‡ªç„¶æˆ–äººå·¥ç³»çµ±ï¼Œæ˜¯å°æŠ—æ°£å€™è®Šé·çš„é‡è¦åŠ›é‡ã€‚</p>
    <ul>
      <li>ğŸŒ³ æ£®æ—ï¼šé€éå…‰åˆä½œç”¨å¸æ”¶ COâ‚‚</li>
      <li>ğŸŒ¿ è‰åœ°èˆ‡æ¿•åœ°ï¼šå„²å­˜ç¢³æ–¼æ¤ç‰©é«”èˆ‡åœŸå£¤</li>
      <li>ğŸŒŠ æµ·æ´‹ï¼šæµ·è—»èˆ‡æµ®æ¸¸æ¤ç‰©ä¹Ÿæ˜¯é‡è¦ç¢³åŒ¯</li>
    </ul>

    <h2>ğŸ“Š å›ºç¢³é‡èˆ‡ç¸½å›ºç¢³é‡</h2>
    <ul>
      <li><strong>å¹´å›ºç¢³é‡ï¼š</strong> æŒ‡æ¨¹æœ¨æ¯å¹´èƒ½å¸æ”¶å¤šå°‘ COâ‚‚ï¼Œæœƒéš¨æ¨¹é½¡èˆ‡ç”Ÿé•·é€Ÿç‡è€Œè®Šå‹•ã€‚</li>
      <li><strong>ç¸½å›ºç¢³é‡ï¼š</strong> æŒ‡ä¸€æ£µæ¨¹æˆ–ä¸€ç‰‡æ—åœ°è‡³ä»Šç‚ºæ­¢å¸æ”¶ä¸¦å›ºå®šçš„ COâ‚‚ ç¸½é‡ã€‚</li>
    </ul>

    <h2>ğŸ“ è¨ˆç®—å…¬å¼ï¼ˆç°¡åŒ–ç‰ˆï¼‰ï¼š</h2>
    <ul>
      <li><strong>ç”Ÿç‰©é‡ï¼š</strong> Biomass = 0.15 Ã— DBH<sup>2.27</sup></li>
      <li><strong>ç¢³å«é‡ï¼š</strong> Carbon = Biomass Ã— 0.5</li>
      <li><strong>COâ‚‚ å›ºå®šé‡ï¼š</strong> COâ‚‚ = Carbon Ã— 3.67</li>
      <li><strong>å¹´å›ºç¢³é‡ï¼š</strong> COâ‚‚ Ã· æ¨¹é½¡</li>
    </ul>
  </main>

  <script>
    (function(){
      const root = document.getElementById('carbonCarousel');
      const slides = Array.from(root.querySelectorAll('.slide'));
      const prevBtn = root.querySelector('.prev');
      const nextBtn = root.querySelector('.next');
      const dotsWrap = root.querySelector('.dots');
      const progressBar = document.getElementById('progressBar');
      const caption = document.getElementById('caption');
      const togglePlayBtn = document.getElementById('togglePlay');

      const AUTOPLAY_MS = 4000;
      const DRAG_THRESHOLD = 40; // æ°´å¹³æ‹–æ›³è§¸ç™¼åˆ‡æ›çš„é–€æª»
      let i = 0, timer = null, playing = true;

      // å»ºç«‹åœ“é»
      slides.forEach((_, idx)=>{
        const d = document.createElement('div');
        d.className = 'dot' + (idx===0 ? ' active':'');
        d.title = `ç¬¬ ${idx+1} å¼µ`;
        d.addEventListener('click', ()=>{ stop(); go(idx); play(); });
        dotsWrap.appendChild(d);
      });
      const dots = Array.from(dotsWrap.children);

      function setCaption(idx){
        const img = slides[idx].querySelector('img');
        caption.textContent = img?.dataset?.caption || img?.alt || '';
      }

      function go(n){
        slides[i].classList.remove('active');
        dots[i].classList.remove('active');
        i = (n + slides.length) % slides.length;
        slides[i].classList.add('active');
        dots[i].classList.add('active');
        setCaption(i);
        resetProgress();
      }
      function next(){ go(i+1); }
      function prev(){ go(i-1); }

      // é€²åº¦æ¢æ§åˆ¶
      let startedAt = 0;
      function resetProgress(){
        startedAt = performance.now();
        progressBar.style.width = '0%';
      }
      function tick(){
        if(!playing) return;
        const elapsed = performance.now() - startedAt;
        const p = Math.min(1, elapsed / AUTOPLAY_MS);
        progressBar.style.width = (p*100).toFixed(1) + '%';
        if(p >= 1){ next(); }
        timer = requestAnimationFrame(tick);
      }

      function play(){
        if(playing) return;
        playing = true;
        togglePlayBtn.textContent = 'â¸ æš«åœ';
        resetProgress();
        timer = requestAnimationFrame(tick);
      }
      function stop(){
        playing = false;
        togglePlayBtn.textContent = 'â–¶ï¸ æ’­æ”¾';
        cancelAnimationFrame(timer);
      }
      togglePlayBtn.addEventListener('click', ()=> playing ? stop() : play());

      nextBtn.addEventListener('click', ()=>{ stop(); next(); play(); });
      prevBtn.addEventListener('click', ()=>{ stop(); prev(); play(); });

      // æ»‘é¼ ç§»å…¥æš«åœã€ç§»å‡ºç¹¼çºŒ
      root.addEventListener('mouseenter', stop);
      root.addEventListener('mouseleave', ()=>{ if(!playing){ play(); } });

      // éµç›¤æ“ä½œï¼šå·¦å³åˆ‡æ›ã€ç©ºç™½éµæ’­æ”¾/æš«åœ
      root.addEventListener('keydown', (e)=>{
        if(e.key === 'ArrowRight'){ stop(); next(); play(); }
        if(e.key === 'ArrowLeft'){  stop(); prev(); play(); }
        if(e.key === ' '){ e.preventDefault(); playing ? stop() : play(); }
      });

      // åˆ†é ä¸å¯è¦‹æ™‚æš«åœï¼Œå›ä¾†å¾Œç¹¼çºŒ
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden){ stop(); }
        else { play(); }
      });

      // è§¸æ§ / æ»‘é¼ æ‹–æ›³
      let startX = null, dragging = false;
      const onPointerDown = (e)=>{
        dragging = true;
        startX = e.clientX ?? e.touches?.[0]?.clientX;
        stop(); // æ‹–æ›³ä¸­æš«åœ
      };
      const onPointerMove = (e)=>{
        if(!dragging) return;
        const x = e.clientX ?? e.touches?.[0]?.clientX;
        const dx = x - startX;
        // å¯è¦–éœ€è¦åšä½ç§»è¦–è¦ºæ•ˆæœï¼Œé€™è£¡ä¿æŒç°¡æ½”
      };
      const onPointerUp = (e)=>{
        if(!dragging) return;
        const endX = e.clientX ?? (e.changedTouches?.[0]?.clientX);
        const dx = endX - startX;
        dragging = false;
        if(Math.abs(dx) > DRAG_THRESHOLD){
          if(dx < 0) next(); else prev();
        }
        play(); // æ”¾é–‹å¾Œç¹¼çºŒæ’­æ”¾
      };
      // æ”¯æ´æ»‘é¼ èˆ‡è§¸æ§
      const stage = root.querySelector('.stage');
      stage.addEventListener('mousedown', onPointerDown);
      window.addEventListener('mousemove', onPointerMove);
      window.addEventListener('mouseup', onPointerUp);
      stage.addEventListener('touchstart', onPointerDown, {passive:true});
      stage.addEventListener('touchmove', onPointerMove, {passive:true});
      stage.addEventListener('touchend', onPointerUp);

      // å•Ÿå‹•
      setCaption(0);
      resetProgress();
      timer = requestAnimationFrame(tick);
    })();
  </script>
</body>
</html>
